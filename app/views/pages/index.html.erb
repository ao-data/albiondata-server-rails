<div class="page home-page">
  <header class="site-header">
    <div class="site-header__inner">
      <h1 class="site-title"><%= link_to "The Albion Online Data Project", root_path %></h1>
      <p class="site-tagline">Realtime market and gold data for Albion Online</p>
      <%= render "nav", current: :root %>
    </div>
  </header>

  <div class="disclaimer banner">
    <p><strong>These tools are not affiliated with Albion Online or Sandbox Interactive GmbH.</strong></p>
  </div>

  <main class="main-content">
    <section class="content-section hero">
      <h2>Welcome to the Albion Data Project</h2>
      <p class="lead">The goal of this project is to collect and distribute realtime information for Albion Online. This is achieved with a downloadable client that monitors network traffic specifically for Albion Online, identifies the relevant information, and then ships it off to a central server which distributes the information to anyone who wants it.</p>
      <p>
        <a href="https://github.com/ao-data/albiondata-client/releases" class="btn btn--primary" target="_blank" rel="noopener">Download the client</a>
        <a href="https://tooomm.github.io/github-release-stats/?username=ao-data&repository=albiondata-client" class="btn btn--secondary" target="_blank" rel="noopener">Client download stats</a>
      </p>
    </section>

    <section class="content-section">
      <h2>Player Information</h2>
      <p>If you would like to help the Albion Data Project, and all the web sites and applications that use the data provided by it, then the best thing you can do is download our client and run it whenever you're playing Albion Online.</p>
      <p>The most recent releases can be found here: <a href="https://github.com/ao-data/albiondata-client/releases" target="_blank" rel="noopener">github.com/ao-data/albiondata-client/releases</a></p>
    </section>

    <section class="content-section">
      <h2>Where Can I View The Data I Upload?</h2>
      <aside class="callout">
        <p>Note that the client can only upload the market orders that you load in game, so be sure to browse the market for the prices that you need. When a price is uploaded, it is visible in the data immediately.</p>
      </aside>
    </section>

    <section class="content-section">
      <h2>Developer Information</h2>
      <p>If you're building something to consume the data published by the Albion Data Project here are some things you will need to know:</p>

      <h3>NATS Connection Strings</h3>
      <ul class="code-list">
        <li>Americas: <code>nats://public:thenewalbiondata@nats.albion-online-data.com:4222</code></li>
        <li>Asia: <code>nats://public:thenewalbiondata@nats.albion-online-data.com:24222</code></li>
        <li>Europe: <code>nats://public:thenewalbiondata@nats.albion-online-data.com:34222</code></li>
      </ul>

      <h3>NATS Topics</h3>
      <ul>
        <li><code>goldprices.ingest</code> — all gold prices from data clients (including duplicates)</li>
        <li><code>marketorders.ingest</code> — all orders from data clients (including duplicates)</li>
        <li><code>markethistories.ingest</code> — all histories from data clients (including duplicates)</li>
        <li><code>goldprices.deduped</code> — deduped gold prices</li>
        <li><code>marketorders.deduped</code> — deduped market orders</li>
        <li><code>markethistories.deduped</code> — deduped market histories</li>
      </ul>
      <p>Data message structure: <a href="https://github.com/ao-data/albiondata-client/tree/master/lib" target="_blank" rel="noopener">albiondata-client/lib</a></p>

      <aside class="callout">
        <p><strong>Duplicate messages:</strong> Data is deduplicated over a 10-minute window. As a subscriber you should only get the same message once every 5 minutes. New subscribers may have missed previous messages. For market orders, track the last time an order was seen and after not seeing it for X hours, remove it as probably completed.</p>
      </aside>

      <aside class="callout">
        <p><strong>Market History timestamps</strong> are in ticks. To convert to epoch: <code>(ticks / 10000) - 62136892800000</code>. Example: <code>(638181504000000000 / 10000) - 62136892800000</code> → <code>1681257600000</code>. Use <a href="https://www.unixtimestamp.com/" target="_blank" rel="noopener">unixtimestamp.com</a> for human-readable conversion.</p>
      </aside>
    </section>

    <section class="content-section">
      <h2>Database Table Exports</h2>
      <p>Daily table dumps are available at:</p>
      <ul>
        <li>West / Americas — <a href="https://www.albion-online-data.com/database/" target="_blank" rel="noopener">albion-online-data.com/database/</a></li>
        <li>East / Asia — <a href="https://www.albion-online-data.com/database-east/" target="_blank" rel="noopener">albion-online-data.com/database-east/</a></li>
        <li>Europe — <a href="https://www.albion-online-data.com/database-europe/" target="_blank" rel="noopener">albion-online-data.com/database-europe/</a></li>
      </ul>
    </section>

    <section class="content-section">
      <h2>Albion Data Projects</h2>
      <ul class="project-list">
        <li><a href="https://github.com/ao-data/albiondata-client" target="_blank" rel="noopener">albiondata-client</a> — The client everyone runs to capture data.</li>
        <li><a href="https://github.com/ao-data/albion-data-website" target="_blank" rel="noopener">albion-data-website</a> — This website.</li>
        <li><a href="https://github.com/ao-data/albiondata-server-rails" target="_blank" rel="noopener">albiondata-server-rails</a> — The backend server.</li>
      </ul>
    </section>

    <section class="content-section">
      <h2>Contact Us</h2>
      <p>The best way to get in touch is on the Albion Online Fansites Discord server in <strong>#proj-albiondata</strong> or <strong>#developers</strong>. Invite: <a href="https://discord.gg/TjWdq24" target="_blank" rel="noopener">discord.gg/TjWdq24</a></p>
    </section>

    <section class="content-section" id="is-this-allowed">
      <h2>Is This Allowed?</h2>
      <blockquote class="quote">
        <p>Our position is quite simple. As long as you just look and analyze we are ok with it. The moment you modify or manipulate something or somehow interfere with our services we will react (e.g. perma-ban, take legal action, whatever).</p>
        <footer class="quote__approvals">
          <span class="quote__approval">
            <%= image_tag "maddave-approval.png", alt: "", class: "quote__approval-img" %>
            — MadDave, 2017, Technical Lead at Sandbox Interactive for Albion Online
          </span>
          <span class="quote__approval">
            <%= image_tag "sirisli-approval.png", alt: "", class: "quote__approval-img" %>
            — SirisLi, 2025, Community Manager
          </span>
        </footer>
      </blockquote>
    </section>
  </main>

  <footer class="site-footer">
    <p>The Albion Online Data Project</p>
  </footer>
</div>
